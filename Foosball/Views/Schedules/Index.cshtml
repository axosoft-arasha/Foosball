@model List<Foosball.Models.ScheduleViewModel>

<a href="@Url.Content("~/schedules/edit/0")" class="btn btn-default">Add Schedule</a>

<table id="schedulesTable" class="row-border" cellspacing="0">
	<thead>
		<tr>
			<th>Week</th>
			<th>Date</th>
			<th>Home</th>
			<th>Away</th>
			<th></th>
		</tr>
	</thead>
</table>

<script type="text/javascript">
	$(document).ready(function () {
		$('#schedulesTable').dataTable({
			"ajax": _rootDir + 'schedules/listdata',
			paging: false,
			searching: false,
			info: false,
			columns: [
				{ data: 'Week' },
				{ data: 'Date' },
				{ data: 'HomeTeam' },
				{ data: 'AwayTeam' }
			],
			columnDefs: [
				{
					targets: 2,
					render: function (data, type, row) {
						return '<img class="team-logo-small" src="' + data.ImageUrl + '"/><span class="team-name-list">' + data.Name.toUpperCase() + '</span>';
					}
				},
				{
					targets: 3,
					render: function (data, type, row) {
						return '<img class="team-logo-small" src="' + data.ImageUrl + '"/><span class="team-name-list">' + data.Name.toUpperCase() + '</span>';
					}
				},
				{
					targets: 4,
					render: function (data, type, row) {
						var edit = '<a href="' + _rootDir + 'schedules/edit/' + row.Id + '" class="glyphicon glyphicon-pencil"></a>',
							del = '<a href="javascript:void(0);" class="glyphicon glyphicon-remove-circle" data-id="' + row.Id + '"></a>';

						return edit + ' ' + del;
					}
				}
			]
		});

		$('#schedulesTable').on('click', 'a.glyphicon-remove-circle', function (e) {
			var id = $(this).attr('data-id');
			if (confirm('Are you sure you want to delete the schedule?')) {
				$.ajax({
						url: _rootDir + '/schedules/delete/' + id,
						method: 'POST'
					})
					.always(function () {
						window.location.reload();
					});
			}
		});
	});
</script>

